<div class="container p-2 my-5 border">
    <h1 class="blockquote">My Schedule</h1>
    <!-- Calendar Screen -->
    <div class="d-flex">
        <mat-card class="w-50">
            <mat-calendar *ngIf="dataIn" [(selected)]="selectedDate" [dateClass]="assignedDays"></mat-calendar>
        </mat-card>
        <!-- Schedule Assigned to HCP -->
        <div class="w-50 ms-2 d-flex flex-column">
            <mat-card class="h-50 mb-2">
                <h3 class="color-main">Assigned Work</h3>
                <p *ngIf="selectedDate == null">Select a date to see your assigned hours</p>
                <p *ngIf="!dates.has(selectedDate != null ? selectedDate.toString() : '') && !(selectedDate == null)">
                    You have no hours assigned today. Days with assigned hours are colored on the calendar.
                </p>
                <div *ngIf="dates.has(selectedDate != null ? selectedDate.toString() : '')">
                    <table class="table table-striped table-hover">
                        <thead>
                            <tr>
                                <th>Start</th>
                                <th>End</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let shift of dates.get(selectedDate != null ? selectedDate.toString() : '')">
                                <td>{{shift.start}}</td>
                                <td>{{shift.end}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </mat-card>
            <!-- Logged Hours of HCP -->
            <mat-card class="h-50">
                <h3 class="color-main">Log Work</h3>
                <div class="h-80 d-flex flex-column justify-content-between">
                    <div>
                        <p *ngIf="selectedDate == null">Select a date with assigned hours to log your time</p>
                        <p *ngIf="!dates.has(selectedDate != null ? selectedDate.toString() : '') && !(selectedDate == null)">
                            You have no hours assigned to work today.
                        </p>
                        <p *ngIf="dates.has(selectedDate != null ? selectedDate.toString() : '') && (selectedDate != null) ? (today.getTime() < selectedDate.getTime()) : false">
                            This day is in the future. You cannot log your hours for it yet!
                        </p>
                        <div *ngIf="dates.has(selectedDate != null ? selectedDate.toString() : '') && (selectedDate != null) ? (today.getTime() > selectedDate.getTime()) : false">
                            <table class="table table-striped table-hover">
                                <thead>
                                    <tr>
                                        <th>In</th>
                                        <th>Out</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let shift of loggedTimes.get(selectedDate != null ? selectedDate.toString() : '')">
                                        <td>{{shift.start}}</td>
                                        <td>{{shift.end}}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div>
                        <button mat-raised-button color="primary" 
                        [disabled]="(selectedDate == null) || !dates.has(selectedDate != null ? selectedDate.toString() : '') || (today.getTime() < selectedDate.getTime())">
                            Add
                        </button>
                    </div>
                </div>
            </mat-card>
        </div>
          
    </div>
</div>
